# Тема: Управление по оценке вектора состояния. Модальное управление
$\dot x=Ax+Bu$
$y=Cx$ 
Зачастую размерность вектора измерения $y$ намного меньше, чем размерность вектора управления
Тогда мы вводим оценку вектора состояния $\hat x$ 
В теории, объект управления мы  #бля видим как упрощенную модель с линейными законами
Но мы можем добавить в систему объекта управления такую вещь, как наблюдатель вектора состояния. Он каким-то образом формирует оценку вектора состояния $\hat x$ #бля тут бы схему
В рамках этой лекции мы попытаемся понять, как получать этот вектор состояния
## Асимптотический наблюдатель вектора состояния
У нас есть: 
$\dot x=Ax+By$
$y=Cx$
где $A,B,C=const$
Условимся, что известно, что система вполне наблюдаема
Наша задача - как-то восстановить вектор $x$![[Универ/УМРУ/фото/13.11.24/фото 09:34.jpg]]
Задача синтеза наблюдателя - нахождение матрицы $L$:
 $dot\hat x=A\hat x+Bu+L(y-C\hat x)$ 
 Ошибка оценки вектора состояния:
 $\widetilde x=x-\hat x$
 Подберем $L$ так, чтобы $\widetilde x->0$ при $t->\inf$ 
 Для этого решим диффур:
 $$dot\widetilde x=\dot x-dot\hat x=Ax-A\hat x-L(y-C\hat x)=A(x-\hat x)-LC(x-\hat x)=(A-LC)\widetilde x$$ Коэффициент усиления L выбирается из условия асимптотичческой устойчивости Д.У. ошибки 
  $dot\widetilde x=(A-LC)\widetilde x$ 

### Пример:
![[Drawing 2024-11-13 09.44.33.excalidraw]]
Получаем уравнения:
$J\dot Q+mgl\sin\Theta=0$
$y=\Omega$; $\Omega=\dot\Theta$
Обрабатываем:
$J\ddot\Theta+mgl\Theta=0$
$\omega_{0}^{2}=\frac{mgl}{J}$
Получаем:
$\dot\Theta=\Omega$
$\dot\Omega=-\omega_{0}^{2}\Theta$
$y=\Omega$

Приводим к обычному виду:
$x=\begin{bmatrix}\Theta\\\Omega\end{bmatrix}$
$\dot x=Ax,\ y=Cx$ 
$A=\begin{bmatrix}0&1\\-\omega_{0}^{2}&0\end{bmatrix}$
$C=\begin{bmatrix}0&1\end{bmatrix}$ 
Проверим наблюдаемость:
$O=\begin{bmatrix}C\\CA\end{bmatrix}=\begin{bmatrix}0&1\\-\omega_{0}^{2}&0\end{bmatrix}$ 
$det O=\omega_{0}^{2}\ne0$=> $RgO=2=n$=> система вполне наблюдаема => можно получить $\hat\Theta$,$\hat\Omega$
Получаем систему:
$dot\hat\Theta=\hat\Omega+l_{1}(y-\hat\Omega)$
$dot\hat\Omega=-\omega_{0}^{2}\hat\Theta+l_{2}(y-\hat\Omega)$ 

Смотрим устойчивость:
$det(\lambda I-(A-LC))=det(\lambda I-\begin{bmatrix}0&1-l_{1}\\-\omega_{0}^{2}&-l_{2}\end{bmatrix})=\lambda^2+l_{2}\lambda+\omega^{2}_{0}(1-l_{1})$  
Для устойчивости системы нужно, чтобы $l_2>0$ и $\omega^{2}_{0}(1-l_{1})>0$
Дальше было моделирование и рассмотр различных значений $l_1$ и $l_{2}$ 
При высоких значениях добавляются шумы 
При низких - все иедет по пизде

Есть алгоритм для наблюдателя, который учитывает в себе и шумы и пр - фильтр Каллмана. Коэффициенты он расчитывает сам
## Метод модального управления
- метод синтеза коэффициентов обратной связи, который может быть использован в том числе для стабилизации неустойчивых систем
Постановка задачи
$\dot x=Ax+Bu$
$A,B=const$
система вполне управляема ($RgC(A,B)=N$) (или пара матрица $(A,B)$ управляема)
Нужно найти K таким образом, чтобы характеристический полином системы с обратной связью $u=-Kx$ имел требуемый вид:
$\dot x=Ax-BKx=(A-BK)x$
$det(\lambda I-(A-BK))=Pd(\lambda)=\lambda^n+\alpha_{n-1}\lambda^{n-1}+\dots+\alpha_{0}$
$Pd(\lambda)$ подбирается так, чтобы обеспечить требуемое качество переходных процессов, устойчивость системы
![[Drawing 2024-11-13 10.25.09.excalidraw]]
$Re(\lambda)<0$=> тогда система с управлением будет асимптотически устойчивой 
$\nu=min|Re\lambda_{k}|$ - степень устойчивости системы - показывает, насколько быстро проходит переходный процесс
$\mu=max|tg\varphi_k|$ - степень колебательности - коллерирует с частотой колебаний в переходном процессе
![[Универ/УМРУ/фото/13.11.24/фото 10:31.jpg]]
Стандартные формы характеристического полинома:
1) Форма бинома Ньютона 
   $Pd(\lambda)=(\lambda+\omega_{0})^{n}$, $\omega_{0}>0$
2) Форма Баттерворта 
   корни в этой форме равномерно распределяются по окружности радиусом $\omega_0$ от точки пересечения окружности с отрицательной вещественной осью
   #бля тут бы рисунки
3) и другие
## Как найти коэффициенты
Если у нас одно управляющее воздействие ($m=1$) => $u$ - скаляр
то коэффиценты усиления в задаче модального управления можно найти по формуле АккерманаЖ
$K=e_{n}^TC^{-1}(A,B)*Pd(A)$
$e_{n}=\begin{bmatrix}0\\\vdots\\0\\1\end{bmatrix}$
По сути, в уравнении $K$ мы просто берем последнюю строку матрицы $C^{-1}(A,B)$
$P_{d}(\lambda)=\Pi^{n}_{j=1}(A-\lambda_{K}I)$ 
Если $m>1$, то решений несколько:
- можно свести m к одному - ввести скалярное управление $u=Dv$, где $v$ - формула Аккермана